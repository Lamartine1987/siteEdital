<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Consulta de Editais</title>
    <link rel="stylesheet" href="css/style.css">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
    <script src="js/firebaseConfig.js"></script>
    <script defer src="js/index.js"></script>

    <!-- Botão de logout se o usuário estiver logado -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const header = document.getElementById('mainHeader');
        firebase.auth().onAuthStateChanged(function(user) {
          if (user) {
            const logoutBtn = document.createElement('button');
            logoutBtn.textContent = "Sair";
            logoutBtn.style.backgroundColor = "#dc3545";
            logoutBtn.style.color = "white";
            logoutBtn.style.border = "none";
            logoutBtn.style.borderRadius = "6px";
            logoutBtn.style.padding = "8px 16px";
            logoutBtn.style.cursor = "pointer";
            logoutBtn.style.fontWeight = "bold";

            logoutBtn.onclick = () => {
              firebase.auth().signOut().then(() => {
                window.location.reload();
              });
            };

            header.appendChild(logoutBtn);
          }
        });
      });
    </script>

    <!-- Script principal -->
    
  </head>

  <body>
    <header id="mainHeader" style="display: flex; justify-content: flex-end; align-items: center; gap: 10px; padding: 10px 20px; background-color: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const header = document.getElementById('mainHeader');
          firebase.auth().onAuthStateChanged(function(user) {
            header.innerHTML = ''; // limpa o header
      
            if (user) {
              const logoutBtn = document.createElement('button');
              logoutBtn.textContent = "Sair";
              logoutBtn.style.backgroundColor = "#dc3545";
              logoutBtn.style.color = "white";
              logoutBtn.style.border = "none";
              logoutBtn.style.borderRadius = "6px";
              logoutBtn.style.padding = "8px 16px";
              logoutBtn.style.cursor = "pointer";
              logoutBtn.style.fontWeight = "bold";
      
              logoutBtn.onclick = () => {
                firebase.auth().signOut().then(() => {
                  window.location.reload();
                });
              };
      
              header.appendChild(logoutBtn);
            } else {
              const loginBtn = document.createElement('button');
              loginBtn.textContent = "Login";
              loginBtn.style.backgroundColor = "#007bff";
              loginBtn.style.color = "white";
              loginBtn.style.border = "none";
              loginBtn.style.borderRadius = "6px";
              loginBtn.style.padding = "8px 16px";
              loginBtn.style.cursor = "pointer";
              loginBtn.style.fontWeight = "bold";
      
              const cadastrarBtn = document.createElement('button');
              cadastrarBtn.textContent = "Cadastrar";
              cadastrarBtn.style.backgroundColor = "white";
              cadastrarBtn.style.color = "#28a745";
              cadastrarBtn.style.border = "2px solid #28a745";
              cadastrarBtn.style.borderRadius = "6px";
              cadastrarBtn.style.padding = "8px 16px";
              cadastrarBtn.style.cursor = "pointer";
              cadastrarBtn.style.fontWeight = "bold";
              cadastrarBtn.style.transition = "all 0.3s ease";
      
              // Efeito hover no botão cadastrar
              cadastrarBtn.addEventListener('mouseenter', () => {
                cadastrarBtn.style.backgroundColor = "#28a745";
                cadastrarBtn.style.color = "white";
              });
              cadastrarBtn.addEventListener('mouseleave', () => {
                cadastrarBtn.style.backgroundColor = "white";
                cadastrarBtn.style.color = "#28a745";
              });
      
              loginBtn.onclick = () => window.location.href = "login.html";
              cadastrarBtn.onclick = () => window.location.href = "cadastro.html";
      
              header.appendChild(loginBtn);
              header.appendChild(cadastrarBtn);
            }
          });
        });
      </script>
      
    </header>

    <div class="search-container">
      <h1>Consulta de Editais</h1>
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Buscar edital...">
      </div>
      <div id="editaisContainer" class="editais-container">
        <!-- Cards dos editais serão inseridos aqui -->
      </div>
    </div>

    <!-- Modal de login/cadastro -->
    <div id="loginModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h3>Acesso Restrito</h3>
        <p>Você precisa estar logado para visualizar os editais.</p>
        <div class="modal-buttons">
          <button id="modalLoginBtn" class="confirm-btn">Fazer Login</button>
          <button id="modalRegisterBtn" class="confirm-btn">Cadastrar</button>
          <button id="modalCloseBtn" class="cancel-btn">Fechar</button>
        </div>
      </div>
    </div>
  </body>
</html>
